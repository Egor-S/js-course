# 4. Основы JavaScript
CSS и HTML используются для описания внешнего вида страницы. А для создания логики страницы применяют язык программирования JavaScript.

JavaScript (или сокращенно JS) - является инерпретируемым, высокоуровневым языком. Иногда программы написанные на JS называют сценариями. По синтаксису схож с языком Си.

> Для создания небольших консольных программ на JavaScript удобно использовать онлайн сервисы со встроенным редактором. Например, [JSbin](http://jsbin.com/?js,console)

## Подключение JS
Внедрить JS сценарий на страницу можно двумя способами:

* подключить внешний файл `<script src="myscript.js"></script>`
* вставить код на страницу:

```html
<script>
	alert('Hello, world!');
</script>
```

## Переменные, базовые операторы
Попробуем в действии интерактивную консоль.

Консолью можно пользоваться, как калькулятором:

```javascript
> 2 + 2
  4
> 5 - 1.1
  3.9
> 10 / 3
  3.3333333333333335
> 100 * 0.75
  75
> 10 % 3
  1
```

Операцию сложения можно использовать не только с числами, но и со строками.

```javascript
> "Hello" + "World"
  "HelloWorld"
```

Для хранения значений используются **переменные**. JavaScript обладает динамической типизацией, поэтому уже созданной переменной можно присвоить значение любого типа, а при объявлении переменной тип не указывается.

```javascript
var a = 10;
a = "hello";
```

> Выше приведен отрывок кода, которой мог бы быть написан вне консоли: каждое выражение оканчивается точкой с запятой.

## Списки и словари
Массив (или список) - это переменная, внутри которой находится несколько значений. В большинстве языков программрования эти значения должны быть одного типа, но в JS из-за динамической типизации это могут быть значения разных типов. Чтобы получить доступ к значению внутри массива используется порядковый номер этого значения (нумерация начинается с 0).

```javascript
> var a = [0, "One", "Two", ["Three", 4]]
> a[0]
  0
> a[2]
  "Two"
> a[3]
  ["Three", 4]
> a[3][1]
  4
```

В списки можно в любой момент добавлять элементы. Также с помощью свойства `length` можно узнать длину списка.

```javascript
> var b = [1, 2, 3, 4]
> b.length
  4
> b.push(5)
> b.length
  5
> b
  [1, 2, 3, 4, 5]
```

Существует еще один тип переменной, способный хранить несколько значений - словарь. Главным отличием словаря от списка является то, что значения ассоциируются не с порядковым номером, а с так называемым ключом. Чаще всего ключ представляет из себя строку.

```javascript
> var a = {"age": 11, "name": "Julia"}
> a["age"]
  11
> a["name"]
  "Julia"
> a["height"] = 160
> a["height"]
  160
```

Если ключ не содержит особенных символов (символы отличные от цифр, латинских букв, _ и $), то можно убрать кавычки при создании словаря, а при получении значения пользоваться синтаксисом для свойств.

```javascript
> var b = {name: "Jhon", money: 200}
> b.name
  "Jhon"
> b.money = 205
> b["money"]
  205
```

## Функции
Важной частью любого языка программирования явлюяются функции. С их помощью можно логически разделять программу на подпрограммы и избавляться от необходимости дублирования кода.

Подключив к странице JS скрипт с функцией, ее можно вызывать из консоли или любого другого скрипта, подключенного к странице.

```javascript
function say_hello1(){
	console.log("Hello1!");
}

var say_hello2 = function(){
	console.log("Hello2!");
};

say_hello1();
say_hello2();
```

> `console.log()` выводит сообщение в консоль, удобно использовать для отладки программы.

Отличие `say_hello1` и `say_hello2` заключается в том, что `say_hello2` можно вызывать только после создания, а `say_hello1` из любого места в файле.

Функция может принимать аргументы и возвращать значение.

```javascript
function f(x){
	return x*x + 5*x - 2;
}

var result = f(2);
console.log(result);  // 12
```

Если в функции нет `return`, то по-умолчанию она возвращает `undefined`.

Если аргумент не был передан, то его значение равно `undefined`.

Функции можно пердавать как аргументы.

```javascript
function square(x){
	return x*x;
}

function apply(n, f){
	return f(n);
}

var result = apply(3, square);
console.log(result);  // 9
```

Функция может возвращать другую функцию.

```javascript
function create_printer(str){
	var f = function(){
		console.log(str);
	};
	return f;
}

var print_hi = create_printer("Hi!");
print_hi();  // Hi!
```

> Комментарии используют для создания пояснений прямо в коде, они не влияют на работу программы. Однострочный комментарий начинается с `//` и идет до конца строки, многострочный начинается с `/*` и идет до `*/`

## Ветвление программы
Очень редко удается обойтись однозначно заданной последовательностью действий, чаще всего нужно проверять выполнение необходимых условий. Для этого существуют конструкции `if` и `switch`

### Конструкция `if`
`if` проверяет результат выражения в скобках. В случае `true` выполняется основной блок, в случае `false` выполняется блок `else`.

```javascript
if(price <= money){
	console.log("Вы можете это купить");
}else{
	console.log("У вас недостаточно средств для покупки");
}
```

Если блок содержит только одну инструкцию, то фигурные скобки можно не писать. Если блок `else` не содержит инструкций, то его можно убрать совсем (вместе со словом `else`).

Существуют следующие операторы сравнения:

| Синтаксис | Название | Особенности |
|:---------:|----------|:--------:|
| `a < b`, `a > b`  | Меньше, больше | - |
| `a <= b`, `a >= b` | Меньше или равно, больше или равно | - |
| `a` | Истина | Не равно `null`, `undefined`, `false`, `''`, `[]` и т.д. |
| `!a` | Отрицание | Равно `null`, `undefined`, `false`, `''`, `[]` и т.д. |
| `a == b`, `a != b` | Равно, не равно | "Слабое" сравнение |
| `a === b`, `a !== b` | Строгое равно, строгое не равно | Точное сравнение |

"Слабое" сравнение допускает преобразование типов в отличии от точного

```
> "12" == 12
  true
> "12" === 12
  false
```

Иногда автоматическое преобразование типов бывает удобно, но это может сильно осложнить отладку.

### Конструкция `switch`
`switch` является аналогом вложенных `if`, выполняющих проверку на равенство.

```javascript
switch(fruit){
	case "orange": {
		// fruit === "orange"
		break;
	}
	case "apple": {
		// fruit === "apple"
		break;
	}
	default: {
		// unknown fruit
	}
}
```

В конце каждого блока `case` ставится `break`, препятствующий выполнению последующих блоков (наследие из языка Си). Блок `default` не производит сравнение, поэтому его ставят в конце для обработки случая, когда ни один из `case` не сработал.

## Циклы
Для выполнения повторяющихся действий используются циклы.

### Цикл `while`
Тело цикла будет выполняться снова и снова до тех пор, пока условие истинно.

```javascript
var a = "";
while(a !== "aaaaa"){
	a += "a";
	console.log(a);
}
```

Существует второй вариант `while`, при котором тело цикла гарантированно выполнится один раз.

```javascript
var a = "No";
do{
	console.log(a);
}while(a === "Yes");
```

### Цикл `for`
При создании цикла `for` указывается начальное состояние счетчиков, условие (как в `while`) и действие по окончании каждой итерации.

```javascript
var a = "abcdef";
for(var i=a.length-1; i>=0; i=i-1){
	console.log(a[i]);
}
```

## Стиль кода
Всегда существуют споры о том, сколько пробелов должно быть в отступе и на какой строке ставить открывающую скобку. Но важно выбрать один стиль написания кода и придерживаться его на протяжении всего проекта.

## Полезные материалы
