# AJAX
Благодаря AJAX нет необходимости перезагружать страницу, чтобы получить новую информацию от сервера. Технология находит применение от простого обновления информации, до одностраничных сайтов.

## `XmlHttpRequest`
Все современные браузеры в полной мере поддерживают тип `XmlHttpRequest`. Фоновый запрос выполняется по следующей схеме:

1. Создание объекта запроса
2. Настройка запроса
3. Отправка данных
4. Чтение ответа

```javascript
var xhr = new XmlHttpRequest();
xhr.open('GET', '/api/news', false);
xhr.send();
if(xhr.status != 200){
	console.error('XHR error: ' + xhr.status);
}else{
	var text = xhr.responseText;
	...
}
```

> В случае POST-запроса метод `send` принимает в качестве аргумента данные, которые будут переданы в теле.

## JSON
На сегодняшний день самым популярным форматом передачи информации является JSON. Он позволяет передавать произвольную информацию, посредством печатных символов. Стандартные объекты JavaScript легко Для этого используются методы `JSON.stringify()` и `JSON.parse()`.

```javascript
var data = {text: 'Hello!', id: 142, tags: ['hello', 'word']};
var json_str = JSON.stringify(data);
var data2 = JSON.parse(json_str);
```

## Callback
Callback - функция, которая будет вызвана по завершению некоторого действия. Использование callback-функций позволяет не останавливать процесс выполнения главного потока программы.

Упомянутый выше `XmlHttpRequest` имеет асинхронный режим, который позволит продолжить выполнение программы, пока запрос обрабатывается сервером.

```javascript
var xhr = new XmlHttpRequest();
xhr.open('GET', '/api/archive/all', true);
xhr.send();
xhr.onreadystatechange = function(){
	if(xhr.readyState != 4) return;
	if(xhr.status != 200){
		...
	}else{
		...
	}
};
```

> Использование синхронного режима не желательно.

## REST API
REST - стиль проектирование интерфейса для взаимодействия между пользователем и сервером. Строится поверх протокола HTTP, чаще всего с использованием JSON. Важной особенностью является то, что все необходимые данные передаются в запросе, сервер не хранит никакой промежуточной информации.

Для повышения качества API рекомендуется использовать по ситуации методы HTTP запросов: `GET` - запрос ресурса, `POST` - загрузка пользовательских данных, `PUT` - обновление ресурса, `DELETE` - удаление ресурса.

Для упрощения работы с API рекомендуется использовать коды состояний HTTP, тем самым сразу давая понять успешность запроса:

- 200 - Успешный запрос
- 4xx - Ошибка на стороне клиента
- 5xx - Ошибка на стороне сервера

## Полезные ссылки